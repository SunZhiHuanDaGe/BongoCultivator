# Plan 15: 物品价值重构与经济循环 (Item Value & Economy)

## 目标
全面审查和重构现有的物品系统 (`items_v2.json` / Database)，确保**每一个物品**都有其实际用途，杜绝“垃圾堆砌”。
构建合理的“采集 -> 制造 -> 消耗/交易”经济循环，让“卖钱”成为兜底的有用选项。

## 1. 核心原则
1.  **拒绝纯废品 (No Junk w/o Value)**: 即使是最低级的“废弃符纸”，也应该能回收变成灵石或者作为特定“旁门左道”的材料。目前标记为 `type: "junk"` 的物品必须整改。
2.  **多维度用途**:
    *   **直接属性**: 吃掉加 EXP/Body/Mind/Affection。
    *   **炼丹材料**: 配方必需品。
    *   **硬通货**: 坊市高价回收（专门换钱的道具）。
    *   **特殊消耗**: 诱妖、阵法、突破辅助。
3.  **价值锚定**: 所有的材料价格应该与其效用（如提供的EXP量、增加的属性值）挂钩，避免价格倒挂。
    *   *Note*: 游戏中的“攻击力”特指高 APM (斗法模式) 下的修仙效率，攻击力越高，狂点键盘时的修为收益越高。

## 2. 待优化物品清单 (初步扫描)
基于用户反馈，以下类型需要重点修改：
*   **凡铁矿/废弃符纸**: 目前是 Junk，建议改为炼制 1阶“飞剑符”（增加 10分钟攻击力）的材料，或者高价回收废品。
*   **无根水/山泉水**: 泛滥但用途单一，建议允许合成高级溶剂。
*   **低阶妖丹**: 增加负面效果（心魔）的同时，大幅增加正面效果（修为），使其成为“双刃剑”而非“鸡肋”。

## 3. 执行步骤

### Phase 1: 物品表审查与重设计 [已完成]
1.  **数据清洗**: 已将所有 `items.json` 和 `items_v2.json` 数据清洗并去除 `type: "junk"`，全量导入 SQLite 数据库 (`item_definitions` 表)。
2.  **存量数据修复**: 通过迁移脚本将老版本存档中的废弃 ID 映射到了新版有用材料 (如 `herb_marrow_0` -> `止血草`)。

### Phase 2: 炼丹配方补全 [已完成]
1.  **全量配方覆盖**: 扫描并确保了所有 Material 类型物品都有对应配方。
2.  **新增配方**:
    *   `凡铁矿` x5 -> `铁精` (材料提纯)
    *   `废弃符纸` x5 -> `灵石碎片` (回收变现)
    *   `鬼枯藤` x2 + `止血草` x1 -> `毒液瓶` (新增道具)
3.  **新增物品**: `灵石碎片` (价值10灵石的回收物), `毒液瓶`。

### Phase 3: 坊市回收与事件优化 [已完成]
1.  **资源回收 (Sell Tab)**:
    *   在坊市界面新增了“资源回收”页签。
    *   支持**单卖**和**整组出售**。
    *   动态定价策略（基准价的 50%）。
2.  **事件系统增强**:
    *   事件库从 4 个扩充至 11 个。
    *   引入了含分支选择 (Choices) 的交互式事件 (如：乞丐奇遇、悬崖抉择、赌石)。
    *   事件数据完全数据库化，支持热更新。

## 4. 后续计划
*   Plan 15 已完成，经济循环已闭环。
*   下一步建议关注 Plan 10 (Event System) 的进一步扩展，利用现有的数据库架构增添更多随机性。
